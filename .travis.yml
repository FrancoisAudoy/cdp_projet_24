language: node_js
node_js:
 - lts/*

sudo: required
os: linux
dist: trusty

service: docker

addons:
 firefox : latest
 
before_install:
 - sudo apt update
 - sudo apt-get install docker-ce
 - export DISPLAY=:99.0
 - sh -e /etc/init.d/xvfb start
 - sleep 3
 - stty cols 80

install:
 - sudo docker-compose build
 - sudo docker-compose up -d
 
script:
 - echo "############ TEST SERVER ############"
 - cd src/server
 - npm install mocha supertest should 
 - npm test
 - echo "############ TEST CLIENT ############"
 - cd ../cdp_24_app/
 - npm install
 - npm test

notifications:
 email: false